tenets:
  - name: wrap_errs
    doc: Ensure all errors are handled with the errors package.
    flows:
      codelingo/review:
        comments: Please wrap error in error.Trace.
    query: |
      import (
        codelingo/ast/go
      )

      @ review.comment
      go.func_decl(depth = any):
        go.assign_stmt(depth = any): 
          go.ident(depth = any):
            type == "error"
        exclude:
          go.if_stmt(depth = any):
            go.binary_expr:
              go.ident(depth = any):
                type == "error"
            go.call_expr
